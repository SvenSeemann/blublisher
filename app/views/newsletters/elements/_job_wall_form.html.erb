<div>
<%= form_tag '/newsletter/element/save', remote: true, onsubmit: 'set_parent_to_modify(this)' do %>
  <h4>Stellenangebote</h4>
    <%= hidden_field_tag :element_type, 'JobWallElement' %>
    <%= hidden_field_tag :newsletter_id, Newsletter.last.id %>

    <div id="next-employment-notices">

    </div>

    <div class="department-selection-wrapper">
      <label for="">Fachbereich ausw√§hlen</label>
      <%= collection_select("department", "department_id", Department.all, :id, :name, {}, {class: 'form-control'}) %>
    </div>

    <div class="form-group">
      <label for="category-field">Kategorie</label>

      <%= collection_select(:category, :category_id, Category.all, :id, :name, {}, {class: 'form-control', id: 'category-field'}) %>
    </div>

    <input type="submit" />
<% end %>
</div>

<script type="text/javascript" charset="utf-8" async defer>
  $('#department_department_id').on({
    "focus": function() {
      this.selectedIndex = -1;
    },
    "change": function() {
      department = $(this).val();
      new_next_employment_notices();
      get_emplyoment_notices(department);
    }
  });
</script>